<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Wells-fargo-analytics-comp by JoshuaTurner42</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-dark.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/JoshuaTurner42/wells-fargo-analytics-comp">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/JoshuaTurner42/wells-fargo-analytics-comp/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/JoshuaTurner42/wells-fargo-analytics-comp/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Wells-fargo-analytics-comp</h1>
          <p></p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/JoshuaTurner42">JoshuaTurner42</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></span>
        </div>

        <h1>
<a id="topics" class="anchor" href="#topics" aria-hidden="true"><span class="octicon octicon-link"></span></a>Topics</h1>

<h2>
<a id="introduction" class="anchor" href="#introduction" aria-hidden="true"><span class="octicon octicon-link"></span></a>Introduction</h2>

<p>Wells Fargo set up and sponsored a data analysis competition between participants from several different schools. Participants were given a large data set of over 200,000 Twitter and Facebook posts to process and analyze using data analytic techniques. The following deliverables were also provided as goals.</p>

<p>Deliverable A - Describe your Approach and Methodology. Include a visual representation of your analytic process flow.
Deliverable B - Discuss the data and its relationship to social conversation drivers.
Deliverable C - Document your code and reference the analytic process flow-diagram from deliverable A. 
Deliverable D - Create a list of topics and substance you found </p>

<h2>
<a id="approach-and-methodology" class="anchor" href="#approach-and-methodology" aria-hidden="true"><span class="octicon octicon-link"></span></a>Approach and Methodology</h2>

<p>Our team has gathered all the tweets from August 2015, and Facebook comments between Aug. 2014 and Aug. 2015 regarding the chosen banks across the industry from the data file given, and first analyzed its vocabulary frequency, 3,000 counts being the least amount of frequency. This process helped us to understand the general comments that were being said about the bank industry, including the ones involving four main banks. We also approached these tweets and Facebook comments by excerpting those which only involve our four main banks. We first split the tweets and comments by Bank A, B, C, D, trying to grasp the level of negativeness and positiveness of each bank by using the sentiment scoring algorithm which would provide a score for each tweets and comments between -10 and 10 with 0 being neutral. The tweets and Facebook comments that were split at the previous stage contained all different kinds of topics that were not financially related. Therefore, we now wanted to pick out tweets and comments that only take financial terms into account among them to comprehend how positively or negatively each bank was perceived by customers. We then used the same sentiment scoring algorithm method again on those financial related tweets and comments to score each bank according to the score on each tweets and comments. </p>

<h2>
<a id="graphics" class="anchor" href="#graphics" aria-hidden="true"><span class="octicon octicon-link"></span></a>Graphics</h2>

<p>Word Frequency Chart Entire Data Set (min count 3000)
<img src="http://i.imgur.com/FswUfrL.png" alt="Word Frequency"></p>

<p>Bank A overall sentiment score
<img src="http://i.imgur.com/axjtjy7.png" alt="Bank A overall sentiment score"></p>

<p>Bank B overall sentiment score
<img src="http://i.imgur.com/OuB4ATy.png" alt="Bank B overall sentiment score"></p>

<p>Bank C overall sentiment score
<img src="http://i.imgur.com/DknxkXf.png" alt="Bank C overall sentiment score"></p>

<p>Bank D overall sentiment score
<img src="http://i.imgur.com/upwqZS1.png" alt="Bank D overall sentiment score"></p>

<p>More charts like those above were done for each of our chosen words (account, finance, credit, and service) for each bank for a total of 16.</p>

<h2>
<a id="code" class="anchor" href="#code" aria-hidden="true"><span class="octicon octicon-link"></span></a>Code</h2>

<h3>
<a id="python-code" class="anchor" href="#python-code" aria-hidden="true"><span class="octicon octicon-link"></span></a>Python Code</h3>

<div class="highlight highlight-source-abl"><pre># coded by: Joshua Turner

def <span class="pl-c1"><span class="pl-c1">main</span></span>():
    <span class="pl-c1"><span class="pl-c1">banksort</span></span>()
    <span class="pl-c1"><span class="pl-c1">accountsort</span></span>()
    <span class="pl-c1"><span class="pl-c1">creditsort</span></span>()
    <span class="pl-c1"><span class="pl-c1">financesort</span></span>()
    <span class="pl-c1"><span class="pl-c1">servicesort</span></span>()

def <span class="pl-c1"><span class="pl-c1">banksort</span></span>():
    <span class="pl-s">"<span class="pl-cce">""</span></span>
<span class="pl-s">    This function reads the contents of a text file, scans for BankA,B,C,D,</span>
<span class="pl-s">    and writes the list item to the appropriate output</span>
<span class="pl-s">    file. </span>
<span class="pl-s">    <span class="pl-cce">""</span>"</span>
    infileName <span class="pl-k">=</span> <span class="pl-s">"DataSet.txt"</span>
    infile <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(infileName<span class="pl-k">,</span> <span class="pl-s">"rb"</span>)
    bankAoutfile <span class="pl-k">=</span> <span class="pl-s">"bankA.txt"</span>
    bankBoutfile <span class="pl-k">=</span> <span class="pl-s">"bankB.txt"</span>
    bankCoutfile <span class="pl-k">=</span> <span class="pl-s">"bankC.txt"</span>
    bankDoutfile <span class="pl-k">=</span> <span class="pl-s">"bankD.txt"</span>
    outfileA <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(bankAoutfile<span class="pl-k">,</span> <span class="pl-s">"w"</span>)
    outfileB <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(bankBoutfile<span class="pl-k">,</span> <span class="pl-s">"w"</span>)
    outfileC <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(bankCoutfile<span class="pl-k">,</span> <span class="pl-s">"w"</span>)
    outfileD <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(bankDoutfile<span class="pl-k">,</span> <span class="pl-s">"w"</span>)    
    <span class="pl-k">for</span> line in infile:
        <span class="pl-k">if</span> b<span class="pl-s">"BankA"</span> in line:
            <span class="pl-c1"><span class="pl-c1">print</span></span>(line<span class="pl-k">,</span> file<span class="pl-k">=</span>outfileA)
        elif b<span class="pl-s">"BankB"</span> in line:
            <span class="pl-c1"><span class="pl-c1">print</span></span>(line<span class="pl-k">,</span> file<span class="pl-k">=</span>outfileB)
        elif b<span class="pl-s">"BankC"</span> in line:
            <span class="pl-c1"><span class="pl-c1">print</span></span>(line<span class="pl-k">,</span> file<span class="pl-k">=</span>outfileC)
        elif b<span class="pl-s">"BankD"</span> in line:
            <span class="pl-c1"><span class="pl-c1">print</span></span>(line<span class="pl-k">,</span> file<span class="pl-k">=</span>outfileD)

    infile<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    outfileA<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    outfileB<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    outfileC<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    outfileD<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()

def <span class="pl-c1"><span class="pl-c1">accountsort</span></span>():
    <span class="pl-s">"<span class="pl-cce">""</span></span>
<span class="pl-s">    This function reads the contents of the sorted bank files (A,B,C,D), scans</span>
<span class="pl-s">    for the word 'account' and writes to the appropriate output file.</span>
<span class="pl-s">    <span class="pl-cce">""</span>"</span>
    infileA <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"bankA.txt"</span><span class="pl-k">,</span> <span class="pl-s">"rb"</span>)
    infileB <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"bankB.txt"</span><span class="pl-k">,</span> <span class="pl-s">"rb"</span>)
    infileC <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"bankC.txt"</span><span class="pl-k">,</span> <span class="pl-s">"rb"</span>)
    infileD <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"bankD.txt"</span><span class="pl-k">,</span> <span class="pl-s">"rb"</span>)
    accountoutA <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"accountA.txt"</span><span class="pl-k">,</span> <span class="pl-s">"w"</span>)
    accountoutB <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"accountB.txt"</span><span class="pl-k">,</span> <span class="pl-s">"w"</span>)
    accountoutC <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"accountC.txt"</span><span class="pl-k">,</span> <span class="pl-s">"w"</span>)
    accountoutD <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"accountD.txt"</span><span class="pl-k">,</span> <span class="pl-s">"w"</span>)
    <span class="pl-k">for</span> line in infileA:
        <span class="pl-k">if</span> b<span class="pl-s">"account"</span> in line:
            <span class="pl-c1"><span class="pl-c1">print</span></span>(line<span class="pl-k">,</span> file<span class="pl-k">=</span>accountoutA)
    <span class="pl-k">for</span> line in infileB:
        <span class="pl-k">if</span> b<span class="pl-s">"account"</span> in line:
            <span class="pl-c1"><span class="pl-c1">print</span></span>(line<span class="pl-k">,</span> file<span class="pl-k">=</span>accountoutB)
    <span class="pl-k">for</span> line in infileC:
        <span class="pl-k">if</span> b<span class="pl-s">"account"</span> in line:
            <span class="pl-c1"><span class="pl-c1">print</span></span>(line<span class="pl-k">,</span> file<span class="pl-k">=</span>accountoutC)
    <span class="pl-k">for</span> line in infileD:
        <span class="pl-k">if</span> b<span class="pl-s">"account"</span> in line:
            <span class="pl-c1"><span class="pl-c1">print</span></span>(line<span class="pl-k">,</span> file<span class="pl-k">=</span>accountoutD)

    infileA<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    infileB<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    infileC<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    infileD<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    accountoutA<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    accountoutB<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    accountoutC<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    accountoutD<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()

def <span class="pl-c1"><span class="pl-c1">creditsort</span></span>():
    <span class="pl-s">"<span class="pl-cce">""</span></span>
<span class="pl-s">    This function reads the contents of the sorted bank files (A,B,C,D), scans</span>
<span class="pl-s">    for the word 'credit' and writes to the appropriate output file.</span>
<span class="pl-s">    <span class="pl-cce">""</span>"</span>
    infileA <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"bankA.txt"</span><span class="pl-k">,</span> <span class="pl-s">"rb"</span>)
    infileB <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"bankB.txt"</span><span class="pl-k">,</span> <span class="pl-s">"rb"</span>)
    infileC <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"bankC.txt"</span><span class="pl-k">,</span> <span class="pl-s">"rb"</span>)
    infileD <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"bankD.txt"</span><span class="pl-k">,</span> <span class="pl-s">"rb"</span>)
    creditoutA <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"creditA.txt"</span><span class="pl-k">,</span> <span class="pl-s">"w"</span>)
    creditoutB <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"creditB.txt"</span><span class="pl-k">,</span> <span class="pl-s">"w"</span>)
    creditoutC <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"creditC.txt"</span><span class="pl-k">,</span> <span class="pl-s">"w"</span>)
    creditoutD <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"creditD.txt"</span><span class="pl-k">,</span> <span class="pl-s">"w"</span>)
    <span class="pl-k">for</span> line in infileA:
        <span class="pl-k">if</span> b<span class="pl-s">"credit"</span> in line:
            <span class="pl-c1"><span class="pl-c1">print</span></span>(line<span class="pl-k">,</span> file<span class="pl-k">=</span>creditoutA)
    <span class="pl-k">for</span> line in infileB:
        <span class="pl-k">if</span> b<span class="pl-s">"credit"</span> in line:
            <span class="pl-c1"><span class="pl-c1">print</span></span>(line<span class="pl-k">,</span> file<span class="pl-k">=</span>creditoutB)
    <span class="pl-k">for</span> line in infileC:
        <span class="pl-k">if</span> b<span class="pl-s">"credit"</span> in line:
            <span class="pl-c1"><span class="pl-c1">print</span></span>(line<span class="pl-k">,</span> file<span class="pl-k">=</span>creditoutC)
    <span class="pl-k">for</span> line in infileD:
        <span class="pl-k">if</span> b<span class="pl-s">"credit"</span> in line:
            <span class="pl-c1"><span class="pl-c1">print</span></span>(line<span class="pl-k">,</span> file<span class="pl-k">=</span>creditoutD)

    infileA<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    infileB<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    infileC<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    infileD<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    creditoutA<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    creditoutB<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    creditoutC<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    creditoutD<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()

def <span class="pl-c1"><span class="pl-c1">financesort</span></span>():
    <span class="pl-s">"<span class="pl-cce">""</span></span>
<span class="pl-s">    This function reads the contents of the sorted bank files (A,B,C,D), scans</span>
<span class="pl-s">    for the word 'finance' and writes to the appropriate output file.</span>
<span class="pl-s">    <span class="pl-cce">""</span>"</span>
    infileA <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"bankA.txt"</span><span class="pl-k">,</span> <span class="pl-s">"rb"</span>)
    infileB <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"bankB.txt"</span><span class="pl-k">,</span> <span class="pl-s">"rb"</span>)
    infileC <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"bankC.txt"</span><span class="pl-k">,</span> <span class="pl-s">"rb"</span>)
    infileD <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"bankD.txt"</span><span class="pl-k">,</span> <span class="pl-s">"rb"</span>)
    financeoutA <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"financeA.txt"</span><span class="pl-k">,</span> <span class="pl-s">"w"</span>)
    financeoutB <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"financeB.txt"</span><span class="pl-k">,</span> <span class="pl-s">"w"</span>)
    financeoutC <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"financeC.txt"</span><span class="pl-k">,</span> <span class="pl-s">"w"</span>)
    financeoutD <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"financeD.txt"</span><span class="pl-k">,</span> <span class="pl-s">"w"</span>)
    <span class="pl-k">for</span> line in infileA:
        <span class="pl-k">if</span> b<span class="pl-s">"finance"</span> in line:
            <span class="pl-c1"><span class="pl-c1">print</span></span>(line<span class="pl-k">,</span> file<span class="pl-k">=</span>financeoutA)
    <span class="pl-k">for</span> line in infileB:
        <span class="pl-k">if</span> b<span class="pl-s">"finance"</span> in line:
            <span class="pl-c1"><span class="pl-c1">print</span></span>(line<span class="pl-k">,</span> file<span class="pl-k">=</span>financeoutB)
    <span class="pl-k">for</span> line in infileC:
        <span class="pl-k">if</span> b<span class="pl-s">"finance"</span> in line:
            <span class="pl-c1"><span class="pl-c1">print</span></span>(line<span class="pl-k">,</span> file<span class="pl-k">=</span>financeoutC)
    <span class="pl-k">for</span> line in infileD:
        <span class="pl-k">if</span> b<span class="pl-s">"finance"</span> in line:
            <span class="pl-c1"><span class="pl-c1">print</span></span>(line<span class="pl-k">,</span> file<span class="pl-k">=</span>financeoutD)

    infileA<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    infileB<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    infileC<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    infileD<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    financeoutA<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    financeoutB<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    financeoutC<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    financeoutD<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()

def <span class="pl-c1"><span class="pl-c1">servicesort</span></span>():
    <span class="pl-s">"<span class="pl-cce">""</span></span>
<span class="pl-s">    This function reads the contents of the sorted bank files (A,B,C,D), scans</span>
<span class="pl-s">    for the word 'service' and writes to the appropriate output file.</span>
<span class="pl-s">    <span class="pl-cce">""</span>"</span>
    infileA <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"bankA.txt"</span><span class="pl-k">,</span> <span class="pl-s">"rb"</span>)
    infileB <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"bankB.txt"</span><span class="pl-k">,</span> <span class="pl-s">"rb"</span>)
    infileC <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"bankC.txt"</span><span class="pl-k">,</span> <span class="pl-s">"rb"</span>)
    infileD <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"bankD.txt"</span><span class="pl-k">,</span> <span class="pl-s">"rb"</span>)
    serviceoutA <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"serviceA.txt"</span><span class="pl-k">,</span> <span class="pl-s">"w"</span>)
    serviceoutB <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"serviceB.txt"</span><span class="pl-k">,</span> <span class="pl-s">"w"</span>)
    serviceoutC <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"serviceC.txt"</span><span class="pl-k">,</span> <span class="pl-s">"w"</span>)
    serviceoutD <span class="pl-k">=</span> <span class="pl-c1"><span class="pl-c1">open</span></span>(<span class="pl-s">"serviceD.txt"</span><span class="pl-k">,</span> <span class="pl-s">"w"</span>)
    <span class="pl-k">for</span> line in infileA:
        <span class="pl-k">if</span> b<span class="pl-s">"service"</span> in line:
            <span class="pl-c1"><span class="pl-c1">print</span></span>(line<span class="pl-k">,</span> file<span class="pl-k">=</span>serviceoutA)
    <span class="pl-k">for</span> line in infileB:
        <span class="pl-k">if</span> b<span class="pl-s">"service"</span> in line:
            <span class="pl-c1"><span class="pl-c1">print</span></span>(line<span class="pl-k">,</span> file<span class="pl-k">=</span>serviceoutB)
    <span class="pl-k">for</span> line in infileC:
        <span class="pl-k">if</span> b<span class="pl-s">"service"</span> in line:
            <span class="pl-c1"><span class="pl-c1">print</span></span>(line<span class="pl-k">,</span> file<span class="pl-k">=</span>serviceoutC)
    <span class="pl-k">for</span> line in infileD:
        <span class="pl-k">if</span> b<span class="pl-s">"service"</span> in line:
            <span class="pl-c1"><span class="pl-c1">print</span></span>(line<span class="pl-k">,</span> file<span class="pl-k">=</span>serviceoutD)

    infileA<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    infileB<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    infileC<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    infileD<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    serviceoutA<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    serviceoutB<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    serviceoutC<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()
    serviceoutD<span class="pl-k">.</span><span class="pl-c1"><span class="pl-c1">close</span></span>()

<span class="pl-c1"><span class="pl-c1">main</span></span>()</pre></div>

<h3>
<a id="r-code" class="anchor" href="#r-code" aria-hidden="true"><span class="octicon octicon-link"></span></a>R Code</h3>

<div class="highlight highlight-source-r"><pre><span class="pl-c">## Well's Fargo FB/Twitter data competition</span>
<span class="pl-c">## reference: https://rstudio-pubs-static.s3.amazonaws.com/31867_8236987cf0a8444e962ccd2aec46d9c3.html</span>
<span class="pl-c">## reference: http://www.inside-r.org/howto/mining-twitter-airline-consumer-sentiment</span>
<span class="pl-c">## coded by: Joshua Turner </span>

library(<span class="pl-smi">plyr</span>)
library(<span class="pl-smi">stringr</span>)
library(<span class="pl-smi">ggplot2</span>)
library(<span class="pl-smi">tm</span>)
library(<span class="pl-smi">rpart</span>)

<span class="pl-c"># Hu and Liu's "opinion lexicon," categorizes words as positive or negative</span>
<span class="pl-c"># found at http://www.cs.uic.edu/~liub/FBS/opinion-lexicon-English.rar</span>
<span class="pl-v">hu.liu.pos</span> <span class="pl-k">=</span> scan(<span class="pl-s"><span class="pl-pds">'</span>~/positive-words.txt<span class="pl-pds">'</span></span>,
                  <span class="pl-v">what</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>character<span class="pl-pds">'</span></span>, <span class="pl-v">comment.char</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>;<span class="pl-pds">'</span></span>)
<span class="pl-v">hu.liu.neg</span> <span class="pl-k">=</span> scan(<span class="pl-s"><span class="pl-pds">'</span>~/negative-words.txt<span class="pl-pds">'</span></span>,
                  <span class="pl-v">what</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>character<span class="pl-pds">'</span></span>, <span class="pl-v">comment.char</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>;<span class="pl-pds">'</span></span>)
<span class="pl-v">pos.words</span> <span class="pl-k">=</span> c(<span class="pl-smi">hu.liu.pos</span>, <span class="pl-s"><span class="pl-pds">'</span>upgrade<span class="pl-pds">'</span></span>)
<span class="pl-v">neg.words</span> <span class="pl-k">=</span> c(<span class="pl-smi">hu.liu.neg</span>, <span class="pl-s"><span class="pl-pds">'</span>wtf<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>wait<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>waiting<span class="pl-pds">'</span></span>,
              <span class="pl-s"><span class="pl-pds">'</span>epicfail<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>mechanical<span class="pl-pds">'</span></span>)
<span class="pl-c"># score.sentiment() function uses laply() to iterate through the input text. </span>
<span class="pl-c"># It strips punctuation and control characters from each line using R’s regular </span>
<span class="pl-c"># expression-powered substitution function, gsub(), and uses match() against </span>
<span class="pl-c"># each word list to find matches; taken from</span>
<span class="pl-c"># http://www.inside-r.org/howto/mining-twitter-airline-consumer-sentiment</span>
<span class="pl-v">score.sentiment</span> <span class="pl-k">=</span> <span class="pl-k">function</span>(<span class="pl-smi">sentences</span>, <span class="pl-smi">pos.words</span>, <span class="pl-smi">neg.words</span>, <span class="pl-v">.progress</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>none<span class="pl-pds">'</span></span>)
{
  require(<span class="pl-smi">plyr</span>)
  require(<span class="pl-smi">stringr</span>)

  <span class="pl-c"># we got a vector of sentences. plyr will handle a list</span>
  <span class="pl-c"># or a vector as an "l" for us</span>
  <span class="pl-c"># we want a simple array of scores back, so we use</span>
  <span class="pl-c"># "l" + "a" + "ply" = "laply":</span>
  <span class="pl-v">scores</span> <span class="pl-k">=</span> laply(<span class="pl-smi">sentences</span>, <span class="pl-k">function</span>(<span class="pl-smi">sentence</span>, <span class="pl-smi">pos.words</span>, <span class="pl-smi">neg.words</span>) {

    <span class="pl-c"># clean up sentences with R's regex-driven global substitute, gsub():</span>
    <span class="pl-v">sentence</span> <span class="pl-k">=</span> gsub(<span class="pl-s"><span class="pl-pds">'</span>[[:punct:]]<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>, <span class="pl-smi">sentence</span>)
    <span class="pl-v">sentence</span> <span class="pl-k">=</span> gsub(<span class="pl-s"><span class="pl-pds">'</span>[[:cntrl:]]<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>, <span class="pl-smi">sentence</span>)
    <span class="pl-v">sentence</span> <span class="pl-k">=</span> gsub(<span class="pl-s"><span class="pl-pds">'</span><span class="pl-cce">\\</span>d+<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span><span class="pl-pds">'</span></span>, <span class="pl-smi">sentence</span>)
    <span class="pl-c"># and convert to lower case:</span>
    <span class="pl-v">sentence</span> <span class="pl-k">=</span> tolower(<span class="pl-smi">sentence</span>)

    <span class="pl-c"># split into words. str_split is in the stringr package</span>
    <span class="pl-v">word.list</span> <span class="pl-k">=</span> str_split(<span class="pl-smi">sentence</span>, <span class="pl-s"><span class="pl-pds">'</span><span class="pl-cce">\\</span>s+<span class="pl-pds">'</span></span>)
    <span class="pl-c"># sometimes a list() is one level of hierarchy too much</span>
    <span class="pl-v">words</span> <span class="pl-k">=</span> unlist(<span class="pl-smi">word.list</span>)

    <span class="pl-c"># compare our words to the dictionaries of positive &amp; negative terms</span>
    <span class="pl-v">pos.matches</span> <span class="pl-k">=</span> match(<span class="pl-smi">words</span>, <span class="pl-smi">pos.words</span>)
    <span class="pl-v">neg.matches</span> <span class="pl-k">=</span> match(<span class="pl-smi">words</span>, <span class="pl-smi">neg.words</span>)

    <span class="pl-c"># match() returns the position of the matched term or NA</span>
    <span class="pl-c"># we just want a TRUE/FALSE:</span>
    <span class="pl-v">pos.matches</span> <span class="pl-k">=</span> <span class="pl-k">!</span>is.na(<span class="pl-smi">pos.matches</span>)
    <span class="pl-v">neg.matches</span> <span class="pl-k">=</span> <span class="pl-k">!</span>is.na(<span class="pl-smi">neg.matches</span>)

    <span class="pl-c"># and conveniently enough, TRUE/FALSE will be treated as 1/0 by sum():</span>
    <span class="pl-v">score</span> <span class="pl-k">=</span> sum(<span class="pl-smi">pos.matches</span>) <span class="pl-k">-</span> sum(<span class="pl-smi">neg.matches</span>)

    <span class="pl-k">return</span>(<span class="pl-smi">score</span>)
  }, <span class="pl-smi">pos.words</span>, <span class="pl-smi">neg.words</span>, <span class="pl-v">.progress</span><span class="pl-k">=</span>.<span class="pl-smi">progress</span> )

  <span class="pl-v">scores.df</span> <span class="pl-k">=</span> <span class="pl-k">data.frame</span>(<span class="pl-v">score</span><span class="pl-k">=</span><span class="pl-smi">scores</span>, <span class="pl-v">text</span><span class="pl-k">=</span><span class="pl-smi">sentences</span>)
  <span class="pl-k">return</span>(<span class="pl-smi">scores.df</span>)
}


<span class="pl-c"># used to get entire data set</span>
<span class="pl-smi">cname</span> <span class="pl-k">&lt;-</span> <span class="pl-s"><span class="pl-pds">"</span>~/BankDataSet<span class="pl-pds">"</span></span>
<span class="pl-smi">cname</span>   
dir(<span class="pl-smi">cname</span>)

<span class="pl-c"># creates a subset of 10000 to work</span>
setwd(<span class="pl-s"><span class="pl-pds">"</span>~/BankDataSet<span class="pl-pds">"</span></span>)
<span class="pl-v">df</span> <span class="pl-k">=</span> read.csv(<span class="pl-s"><span class="pl-pds">"</span>DataSet.txt<span class="pl-pds">"</span></span>)
<span class="pl-v">idx.10000</span> <span class="pl-k">=</span> sample(<span class="pl-c1">1</span><span class="pl-k">:</span>nrow(<span class="pl-smi">df</span>), <span class="pl-c1">10000</span>)
<span class="pl-v">df.10000</span> <span class="pl-k">=</span> <span class="pl-smi">df</span>[<span class="pl-smi">idx.10000</span>,]
<span class="pl-v">df.entire</span> <span class="pl-k">=</span> <span class="pl-smi">df</span>
<span class="pl-v">df</span> <span class="pl-k">=</span> <span class="pl-smi">df.10000</span>
<span class="pl-smi">docs</span> <span class="pl-k">&lt;-</span> Corpus(DirSource(<span class="pl-smi">cname</span>))

<span class="pl-c"># finds sentiment score for whole data set</span>
<span class="pl-v">bank.scores</span> <span class="pl-k">=</span> score.sentiment(<span class="pl-smi">df</span>, <span class="pl-smi">pos.words</span>,
                              <span class="pl-smi">neg.words</span>, <span class="pl-v">.progress</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>text<span class="pl-pds">'</span></span>)
<span class="pl-c"># formats data for word frequency count</span>
summary(<span class="pl-smi">docs</span>)
<span class="pl-smi">docs</span> <span class="pl-k">&lt;-</span> tm_map(<span class="pl-smi">docs</span>, <span class="pl-smi">removePunctuation</span>)
<span class="pl-smi">docs</span> <span class="pl-k">&lt;-</span> tm_map(<span class="pl-smi">docs</span>, <span class="pl-smi">removeWords</span>, stopwords(<span class="pl-s"><span class="pl-pds">"</span>english<span class="pl-pds">"</span></span>))
<span class="pl-smi">docs</span> <span class="pl-k">&lt;-</span> tm_map(<span class="pl-smi">docs</span>, <span class="pl-smi">removeWords</span>, c(<span class="pl-s"><span class="pl-pds">"</span>Name<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>ADDRESS<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>PHONE<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>INTERNET<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>twit_hndl<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>get<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>got<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>let<span class="pl-pds">"</span></span>,<span class="pl-s"><span class="pl-pds">"</span>number<span class="pl-pds">"</span></span>))
<span class="pl-smi">docs</span> <span class="pl-k">&lt;-</span> tm_map(<span class="pl-smi">docs</span>, <span class="pl-smi">PlainTextDocument</span>)   
<span class="pl-smi">dtm</span> <span class="pl-k">&lt;-</span> DocumentTermMatrix(<span class="pl-smi">docs</span>)   
<span class="pl-smi">dtm</span> 
inspect(<span class="pl-smi">dtm</span>)
<span class="pl-smi">tdm</span> <span class="pl-k">&lt;-</span> TermDocumentMatrix(<span class="pl-smi">docs</span>)   
<span class="pl-smi">tdm</span>
<span class="pl-smi">freq</span> <span class="pl-k">&lt;-</span> colSums(as.matrix(<span class="pl-smi">dtm</span>))   
length(<span class="pl-smi">freq</span>)   
<span class="pl-smi">ord</span> <span class="pl-k">&lt;-</span> order(<span class="pl-smi">freq</span>)   
<span class="pl-smi">dtms</span> <span class="pl-k">&lt;-</span> removeSparseTerms(<span class="pl-smi">dtm</span>, <span class="pl-c1">0.1</span>) <span class="pl-c"># This makes a matrix that is 10% empty space, maximum.</span>
<span class="pl-smi">freq</span>[head(<span class="pl-smi">ord</span>)]
<span class="pl-smi">freq</span>[tail(<span class="pl-smi">ord</span>)]
head(table(<span class="pl-smi">freq</span>), <span class="pl-c1">20</span>)
tail(table(<span class="pl-smi">freq</span>), <span class="pl-c1">20</span>)
<span class="pl-smi">wf</span> <span class="pl-k">&lt;-</span> <span class="pl-k">data.frame</span>(<span class="pl-v">word</span><span class="pl-k">=</span>names(<span class="pl-smi">freq</span>), <span class="pl-v">freq</span><span class="pl-k">=</span><span class="pl-smi">freq</span>)   
head(<span class="pl-smi">wf</span>)
<span class="pl-c"># creates plot of word frequency, shows only words that appear at least 3000 times</span>
<span class="pl-smi">p</span> <span class="pl-k">&lt;-</span> ggplot(subset(<span class="pl-smi">wf</span>, <span class="pl-smi">freq</span><span class="pl-k">&gt;</span><span class="pl-c1">3000</span>), aes(<span class="pl-smi">word</span>, <span class="pl-smi">freq</span>))    
<span class="pl-smi">p</span> <span class="pl-k">&lt;-</span> <span class="pl-smi">p</span> <span class="pl-k">+</span> geom_bar(<span class="pl-v">stat</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>identity<span class="pl-pds">"</span></span>)   
<span class="pl-smi">p</span> <span class="pl-k">&lt;-</span> <span class="pl-smi">p</span> <span class="pl-k">+</span> theme(<span class="pl-v">axis.text.x</span><span class="pl-k">=</span>element_text(<span class="pl-v">angle</span><span class="pl-k">=</span><span class="pl-c1">45</span>, <span class="pl-v">hjust</span><span class="pl-k">=</span><span class="pl-c1">1</span>))   
<span class="pl-smi">p</span>   
<span class="pl-c"># the code below was repeated for each bank and for each chosen word for each bank (total 16)</span>
<span class="pl-v">dfA</span> <span class="pl-k">=</span> read.csv2(<span class="pl-s"><span class="pl-pds">"</span>BankA.txt<span class="pl-pds">"</span></span>)
<span class="pl-v">idx</span> <span class="pl-k">=</span> sample(<span class="pl-c1">1</span><span class="pl-k">:</span>nrow(<span class="pl-smi">dfA</span>),<span class="pl-c1">64249</span>)
<span class="pl-v">dfA.entire</span> <span class="pl-k">=</span> <span class="pl-smi">dfA</span>
<span class="pl-v">dfA</span> <span class="pl-k">=</span> <span class="pl-smi">dfA</span>[<span class="pl-smi">idx</span>,]

<span class="pl-v">bankA.scores</span> <span class="pl-k">=</span> score.sentiment(<span class="pl-smi">dfA</span>, <span class="pl-smi">pos.words</span>,
                              <span class="pl-smi">neg.words</span>, <span class="pl-v">.progress</span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">'</span>text<span class="pl-pds">'</span></span>)

<span class="pl-smi">bankA.scores</span><span class="pl-k">$</span><span class="pl-v">bank</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>BankA<span class="pl-pds">'</span></span>
<span class="pl-smi">bankA.scores</span><span class="pl-k">$</span><span class="pl-v">code</span> <span class="pl-k">=</span> <span class="pl-s"><span class="pl-pds">'</span>BA<span class="pl-pds">'</span></span>


qplot(<span class="pl-smi">bankA.scores</span><span class="pl-k">$</span><span class="pl-smi">score</span>, <span class="pl-v">binwidth</span> <span class="pl-k">=</span> <span class="pl-c1">1</span>)</pre></div>

<h2>
<a id="results" class="anchor" href="#results" aria-hidden="true"><span class="octicon octicon-link"></span></a>Results</h2>

<p>he overall sentiment levels for Banks A, B, C, D were fairly symmetrical, which was fairly surprising. We anticipated more variance within the sentiment levels of each of the banks, but, we came to find that all the banks in the overall sentiment level test were almost symmetric, or even a little skewed to the left. To our surprise, bank customers within the given data had an overall fair balance between positive and negative feedback via Facebook and Twitter. Bank D appeared to be the most symmetric of the banks in the overall sentiment level test comparison. But, there was not any drastic distinguishing jumps between the overall sentiment level comparisons worth noting. As aforementioned, although all banks appeared fairly symmetric, with a closer look, we saw there was a slight skewing to the left in all banks, but hardly enough to notice at first glance. This tells us that although all banks had quite a bit of both negative and positive feedback (fairly symmetric), the positive feedback won in the end by just nudge, which led the graphs to be slightly skewed left.</p>

<p>We then decided to take it another step further and compare specific popular keywords between banks. Based on which words had the highest frequencies, we decided to take a closer look at 4 popular words that were most frequently used in the data set and also, in our opinion, were the most potentially controversial: Service, Finance, Credit, and Account. </p>

<p>While comparing the word, “Account”, we saw that Bank A to Bank B were relateable, as were Bank C to Bank D. Bank A to B were both fairly symmetric with a slight left skew, which meant a slight surplus of positive feedback to barely outweigh the negative feedback. There appeared to be lots of neutral feedback for Bank A and B, with a majority of the data falling near the 0, or neutral mark. </p>

<p>While comparing the word, “Credit”, we saw a lot more positive than we anticipated. All the banks were fairly symmetric with a slight skewing to the left, but banks A, B, and D, were most comparable. They had a majority of the data to the right of the nuertal 0 mark, meaning there was a majority of positive feedback in comparison to the negative feedback for the word, “credit”. Everyone loves a good credit score at these banks! </p>

<p>While comparing the word, “Finance”, we saw a similar trend as before, fairly symmetric across the board, with a slight skewing to the left. The positive feedback seems to always win just barely in the end. In the “Finance” observation, Bank A caught our attention. Yes, Bank A was symmetric and slightly skewed left just like the others, but it was visibly different than the others. A majority of the data in Bank A comparison of the word “Finance” was abnormally neutral compared to the others. Nearly all the data fell close to the 0 neutral mark; it lacked the typical variance that we were starting to anticipate. Bank A customers must have been feeling particularly impartial overall with their financial obligations. </p>

<p>While comparing the word, “Service”, we again saw a similar trend with the symmetry and the slight skewing to the left. In the “Service” comparison, we saw that the data had quite a bit of variance than the other comparisons. The other sentiment word comparisons were typically heavily weighed to the middle and then dropped off into a steep slope. But, across the entire board with the “Service” comparison, the drop off from the neutral mark, where most of the data still lied, the drop off was not as drastic. The positive and negative feedback was right there to break the fall and have a much smoother descent. This is interesting because this particular word showed the most variance out of any words we tested, the most controversial word apparently. It had lots of neutral comments, but it still had quite a lot of positive and negative comments or tweets to really create a widespread controversial word in the data set. </p>

<h2>
<a id="other-possibilities" class="anchor" href="#other-possibilities" aria-hidden="true"><span class="octicon octicon-link"></span></a>Other Possibilities</h2>

<p>If we were to continue the analysis of the data beyond what we've already done, we could convert the frequency histograms to graphs of percentages and use them for statistical comparisons between the different banks. Additionally, any word of interest could be used in the same way as our chosen words, and even combinations of words. We could search through the data for particular words in a particular order then combine them with an underscore into one term thereby allowing easier processing for our other algorithms.</p>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>
